<h1 class="mb-4"><%= @candidate.name %> の詳細</h1>

<div class="card shadow p-4">
  <div class="row g-4 align-items-center">
    <div class="col-12 col-md-4 text-center">
      <% resized_path = "/images/candidates/candidate_#{@candidate.id}_resized.jpg" %>

      <% if @candidate.image.attached? %>
        <% if File.exist?(Rails.root.join("public", "images", "candidates", "candidate_#{@candidate.id}_resized.jpg")) %>
          <%= image_tag resized_path, class: "mb-2 rounded", width: 250, height: 250 %>
        <% else %>
          <%= image_tag "default_candidate.png", class: "mb-2 rounded", width: 250, height: 250 %>
        <% end %>
        <% else %>
          <%= image_tag "default_candidate.png", class: "mb-2 rounded", width: 250, height: 250 %>
      <% end %>
    </div>

    <div class="col-12 col-md-8">
      <dl class="row">
        <dt class="col-sm-3 fw-bold">名前</dt>
        <dd class="col-sm-9"><%= @candidate.name %></dd>

        <dt class="col-sm-3 fw-bold">所属政党</dt>
        <dd class="col-sm-9"><%= @candidate.party.presence || "未設定" %></dd>

        <dt class="col-sm-3 fw-bold">政策紹介</dt>
        <dd class="col-sm-9">
          <%= simple_format(@candidate.policy.presence || "未設定") %>
        </dd>
      </dl>
    </div>
  </div>

  <div class="mt-4 d-flex gap-2">
    <%= link_to "編集", edit_admin_election_candidate_path(@election, @candidate),
                class: "btn btn-warning" %>
    <%= link_to "削除", admin_election_candidate_path(@election, @candidate),
                data: { turbo_confirm: "本当に削除しますか？" },
                method: :delete,
                class: "btn btn-danger" %>
    <%= link_to "候補者一覧に戻る", admin_election_candidates_path(@election),
                class: "btn btn-secondary" %>
  </div>
</div>
